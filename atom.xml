<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://hanjingyuan.github.io</id>
    <title>汉景源的博客</title>
    <updated>2019-10-28T03:54:09.347Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://hanjingyuan.github.io"/>
    <link rel="self" href="https://hanjingyuan.github.io/atom.xml"/>
    <subtitle>我只是一个GIS工程师，来自长沙。</subtitle>
    <logo>https://hanjingyuan.github.io/images/avatar.png</logo>
    <icon>https://hanjingyuan.github.io/favicon.ico</icon>
    <rights>All rights reserved 2019, 汉景源的博客</rights>
    <entry>
        <title type="html"><![CDATA[1028-1103周总结]]></title>
        <id>https://hanjingyuan.github.io/post/1028-1103-zhou-zong-jie</id>
        <link href="https://hanjingyuan.github.io/post/1028-1103-zhou-zong-jie">
        </link>
        <updated>2019-10-28T01:25:42.000Z</updated>
        <content type="html"><![CDATA[<h2 id="1028">1028</h2>
<h3 id="1maven本地包的配置">1.maven本地包的配置</h3>
<ol>
<li>pom文件的配置</li>
</ol>
<pre><code class="language-xml">        &lt;!--geoserver restful--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;it.geosolutions&lt;/groupId&gt;
            &lt;artifactId&gt;geoserver-manager&lt;/artifactId&gt;
            &lt;version&gt;1.7-SNAPSHOT&lt;/version&gt;
            &lt;!--这里使用的是本地jar包集成，远程的环境拉不下来--&gt;
            &lt;scope&gt;system&lt;/scope&gt;
            &lt;systemPath&gt;${basedir}/lib/geoserver-manager-1.7.0.jar&lt;/systemPath&gt;
        &lt;/dependency&gt;
    &lt;build&gt;
        &lt;resources&gt;
            &lt;!--在lib目录下存放着因为网络原因无法拉取到本地的jar包--&gt;
            &lt;!--maven默认打包时不会包含这些jar包，所以需要单独进行配置--&gt;
            &lt;!--包含本地jar包的配置--&gt;
            &lt;resource&gt;
                &lt;directory&gt;${project.basedir}/lib&lt;/directory&gt;
                &lt;targetPath&gt;BOOT-INF/lib/&lt;/targetPath&gt;
                &lt;includes&gt;
                    &lt;include&gt;**/*.jar&lt;/include&gt;
                &lt;/includes&gt;
            &lt;/resource&gt;
            &lt;resource&gt;
                &lt;directory&gt;src/main/resources&lt;/directory&gt;
                &lt;targetPath&gt;BOOT-INF/classes/&lt;/targetPath&gt;
            &lt;/resource&gt;
        &lt;/resources&gt;
    &lt;/build&gt;
</code></pre>
<ol start="2">
<li>根目录下创建lib文件夹，并且把所需要的jar包放入到文件夹中<br>
<img src="https://hanjingyuan.github.io/post-images/1572226106874.png" alt=""></li>
</ol>
<h3 id="2maven配置的若干问题">2.maven配置的若干问题</h3>
<ol>
<li>不要使用3.6.1以上版本的maven；</li>
<li>其他相关问题的参考解决办法：</li>
</ol>
<pre><code>https://blog.csdn.net/ashleyjun/article/details/101106810
https://blog.csdn.net/Certain_/article/details/90745360
</code></pre>
<h3 id="3idea与蓝灯配置的方法">3.idea与蓝灯配置的方法</h3>
<blockquote>
<p>http://www.itzhai.com/intellij-idea-proxy-settings.html</p>
</blockquote>
<h3 id="4maven仓库地址的配置">4.maven仓库地址的配置</h3>
<pre><code class="language-xml">&lt;mirror&gt;
    &lt;id&gt;alimaven&lt;/id&gt;
    &lt;name&gt;aliyun maven&lt;/name&gt;
    &lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public/&lt;/url&gt;
    &lt;mirrorOf&gt;*,!osgeo,!maven2-repository.dev.java.net,!boundless&lt;/mirrorOf&gt; 
&lt;/mirror&gt;
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[geoserver纯环境搭建流程以及问题汇总]]></title>
        <id>https://hanjingyuan.github.io/post/geoserver-chun-huan-jing-da-jian-liu-cheng</id>
        <link href="https://hanjingyuan.github.io/post/geoserver-chun-huan-jing-da-jian-liu-cheng">
        </link>
        <updated>2019-10-25T06:18:15.000Z</updated>
        <content type="html"><![CDATA[<ol>
<li>安装jdk环境</li>
<li>安装tomcat环境，最好是更换默认的8080端口，同时修改默认的jvm内存；</li>
<li>部署war包至webapps中；</li>
<li>修改跨域，相关相关的jetty包放在lib（最好的办法是使用nginx进行端口转发，把跨域关掉）；</li>
<li>修改wms的响应时间，防止进行切片时，出现getServiceInfo超时的情况；</li>
<li>释放数据存储中的主键，将主键暴露出来；</li>
<li>未完待续。。。</li>
</ol>
<h3 id="geoserver内存调整">geoserver内存调整</h3>
<blockquote>
<p>https://hanjingyuan.github.io/post/geoserver-nei-cun-xiu-gai/</p>
</blockquote>
<h3 id="geoserver-主键暴露">geoserver 主键暴露</h3>
<blockquote>
<p>https://hanjingyuan.github.io/post/geoserver-bao-lu-zhu-jian-de-fang-fa</p>
</blockquote>
<h3 id="geoserver在进行wfs时遇到的权限问题readonly">geoserver在进行wfs时遇到的权限问题（readonly）</h3>
<p><img src="https://hanjingyuan.github.io/post-images/1571988779475.png" alt=""><br>
暂时先赋予匿名规则。</p>
<h3 id="部署多台tomcat服务器">部署多台tomcat服务器</h3>
<blockquote>
<p>https://blog.csdn.net/qq_39654841/article/details/82048857</p>
</blockquote>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[geoserver暴露主键的方法]]></title>
        <id>https://hanjingyuan.github.io/post/geoserver-bao-lu-zhu-jian-de-fang-fa</id>
        <link href="https://hanjingyuan.github.io/post/geoserver-bao-lu-zhu-jian-de-fang-fa">
        </link>
        <updated>2019-10-25T06:01:22.000Z</updated>
        <content type="html"><![CDATA[<p>geoserver在发布数据时，默认情况下主键是不会被发布出来的，需要在数据存储中暴露主键出来；<br>
<img src="https://hanjingyuan.github.io/post-images/1571983386059.png" alt=""></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[geoserver内存修改]]></title>
        <id>https://hanjingyuan.github.io/post/geoserver-nei-cun-xiu-gai</id>
        <link href="https://hanjingyuan.github.io/post/geoserver-nei-cun-xiu-gai">
        </link>
        <updated>2019-10-23T00:44:23.000Z</updated>
        <content type="html"><![CDATA[<p>若使用的是在tomcat中部署的war包形式的geoserver，可以直接使用configure tomcat中的设置来直接修改内存即可；<br>
<img src="https://hanjingyuan.github.io/post-images/1571791619967.png" alt=""><br>
<img src="https://hanjingyuan.github.io/post-images/1571791668878.png" alt=""></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[1021-1027周总结]]></title>
        <id>https://hanjingyuan.github.io/post/1021-1027-zhou-zong-jie</id>
        <link href="https://hanjingyuan.github.io/post/1021-1027-zhou-zong-jie">
        </link>
        <updated>2019-10-21T01:02:37.000Z</updated>
        <content type="html"><![CDATA[<h3 id="1021">1021</h3>
<ol>
<li>postgis拓展添加：</li>
</ol>
<pre><code>CREATE EXTENSION postgis;//添加postgis拓展
SELECT postgis_full_version();//查看拓展是否添加成功
</code></pre>
<ol start="2">
<li>spring boot中post的请求方式：</li>
</ol>
<pre><code class="language-java">@PostMapping(&quot;/getPagedSpatialQueryInfo&quot;)
public XResult&lt;PageInfo&lt;Shuiti&gt;&gt; getPagedSpatialQueryInfo(@RequestParam(&quot;pageNo&quot;) Integer pageNo, @RequestParam(&quot;pageSize&quot;) Integer pageSize, @RequestParam(&quot;wkt&quot;) String wkt){
        return new XResult&lt;PageInfo&lt;Shuiti&gt;&gt;(true,&quot;查询成功&quot;,spatialAnalysisService.spatialQuery(pageNo,pageSize,wkt));
    }
</code></pre>
<h3 id="1022">1022</h3>
<ol>
<li>geoserver切图失败的原因：与wms的连接时间默认设置为60s，修改默认时长，修改为更长的时间，即可解决问题。<br>
<img src="https://hanjingyuan.github.io/post-images/1571724178391.png" alt=""><br>
<img src="https://hanjingyuan.github.io/post-images/1571724183168.png" alt=""></li>
</ol>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[1014-1020周总结]]></title>
        <id>https://hanjingyuan.github.io/post/1014-1020-zhou-zong-jie</id>
        <link href="https://hanjingyuan.github.io/post/1014-1020-zhou-zong-jie">
        </link>
        <updated>2019-10-14T02:38:23.000Z</updated>
        <content type="html"><![CDATA[<h2 id="1014">1014</h2>
<h3 id="1geoserver的分页查询">1.geoserver的分页查询</h3>
<p>geoserver的wfs分页查询需要在2.0.0版本及以上进行。</p>
<pre><code>http://10.14.3.160:8080/geoserver/wfs?outputFormat=application%2Fjson&amp;request=getFeature&amp;service=WFS&amp;typeName=cite:hn_region&amp;version=2.0.0&amp;count=2&amp;startIndex=0
</code></pre>
<h3 id="2">2</h3>
<blockquote>
<p>1度 约等于 110Km</p>
</blockquote>
<h3 id="3">3</h3>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[geoserver中wfs使用时的启动时间探索]]></title>
        <id>https://hanjingyuan.github.io/post/geoserver-zhong-wfs-shi-yong-shi-de-qi-dong-shi-jian-tan-suo</id>
        <link href="https://hanjingyuan.github.io/post/geoserver-zhong-wfs-shi-yong-shi-de-qi-dong-shi-jian-tan-suo">
        </link>
        <updated>2019-10-12T03:22:44.000Z</updated>
        <content type="html"><![CDATA[<p>在使用geoserver的wfs服务时，每次把tomcat重启之后，第一次使用wfs会使用很长的时间来打开数据库连接池？同时会进行一个getServiceInfo的操作。</p>
<h2 id="1使用get请求">1.使用get请求</h2>
<p>速度很快，即时即可完成<br>
<img src="https://hanjingyuan.github.io/post-images/1570851255891.png" alt=""><br>
<img src="https://hanjingyuan.github.io/post-images/1570851297925.png" alt=""></p>
<h2 id="2使用post">2.使用post</h2>
<p>速度很慢，在进行请求之前需要进行一个getServiceInfo的操作，这个操作的时间长达半分钟，原因目前未知；</p>
<p><img src="https://hanjingyuan.github.io/post-images/1570851376650.png" alt=""><br>
<img src="https://hanjingyuan.github.io/post-images/1570851541447.png" alt=""></p>
<h2 id="3思考">3.思考</h2>
<ol>
<li>所有的wfs查询以后都使用get方式进行请求，filter条件使用ecql，这样不仅速度快，而且检索更加方便；</li>
<li>wfs的事务操作使用哪一个方式还需要进行验证；</li>
<li>cql_filter使用样例</li>
</ol>
<pre><code>http://127.0.0.1:8080/geoserver/cite/wms?SERVICE=WMS&amp;VERSION=1.1.1&amp;REQUEST=GetMap&amp;FORMAT=image%2Fpng&amp;TRANSPARENT=true&amp;LAYERS=cite%3Ahn_region&amp;exceptions=application%2Fvnd.ogc.se_inimage&amp;CQL_FILTER=intersects(geom%2Cpoint(112.10999%2027.46033))%20and%20display%20%3D%202007&amp;SRS=EPSG%3A4490&amp;STYLES=&amp;WIDTH=765&amp;HEIGHT=768&amp;BBOX=107.3199462890625%2C23.170166015625%2C115.7244873046875%2C31.607666015625
</code></pre>
<figure data-type="image" tabindex="1"><img src="https://hanjingyuan.github.io/post-images/1570860623531.png" alt=""></figure>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[0922-0929周总结]]></title>
        <id>https://hanjingyuan.github.io/post/0922-0929周总结</id>
        <link href="https://hanjingyuan.github.io/post/0922-0929周总结">
        </link>
        <updated>2019-09-21T16:00:00.000Z</updated>
        <content type="html"><![CDATA[<h1 id="0922-0929周">0922-0929周</h1>
<h2 id="0923">0923</h2>
<ol>
<li>快速网格化代码</li>
</ol>
<pre><code class="language-js">javascript: (function() {
	var elements = document.body.getElementsByTagName('*');
	var items = [];
	for (var i = 0; i &lt; elements.length; i++) {
		if (elements[i].innerHTML.indexOf('html * { outline: 1px solid red }') != -1) {
			items.push(elements[i]);
		}
	}
	if (items.length &gt; 0) {
		for (var i = 0; i &lt; items.length; i++) {
			items[i].innerHTML = '';
		}
	} else {
		document.body.innerHTML +=
			'&lt;style&gt;html * { outline: 1px solid red }&lt;/style&gt;';
	}
})();

</code></pre>
<h2 id="0924">0924</h2>
<ol>
<li>当遇到gulp合并js文件突然变慢的时候，此时可以尝试重试启动gulp，基本可以解决；</li>
</ol>
<h2 id="0926">0926</h2>
<ol>
<li>geotools,阿里云maven配置</li>
</ol>
<pre><code class="language-xml">&lt;mirror&gt;
		&lt;id&gt;alimaven&lt;/id&gt;
		&lt;mirrorOf&gt;central&lt;/mirrorOf&gt;
		&lt;name&gt;aliyun maven&lt;/name&gt;
&lt;url&gt;http://maven.aliyun.com/nexus/content/repositories/central/&lt;/url&gt;
		&lt;mirrorOf&gt;*,!osgeo,!maven2-repository.dev.java.net,!boundless&lt;/mirrorOf&gt; 
&lt;/mirror&gt;
</code></pre>
<h2 id="0929">0929</h2>
<ol>
<li>使用nvm作为node.js的版本管理工具；</li>
</ol>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[0915-0921周总结]]></title>
        <id>https://hanjingyuan.github.io/post/0915-0921周总结</id>
        <link href="https://hanjingyuan.github.io/post/0915-0921周总结">
        </link>
        <updated>2019-09-14T16:00:00.000Z</updated>
        <content type="html"><![CDATA[<h1 id="0915-0921周">0915-0921周</h1>
<h2 id="0917">0917</h2>
<ol>
<li>组织树的简单递归算法实现</li>
</ol>
<figure data-type="image" tabindex="1"><img src="https://hanjingyuan.github.io/post-images/1570799418412.png" alt=""></figure>
<pre><code class="language-js">data.forEach(item=&gt;{
  recursiveTraverse(item);
});

const recursiveTraverse = function (node) {
  if (!node || node['children'].length === 0) {
      node['children'] = null;
      return;
  }
  node['children'].forEach(function(item) {
      recursiveTraverse(item);
  });
};
</code></pre>
<h2 id="0918">0918</h2>
<ol>
<li>geoserver中对于restful api使用时遇到401和403问题的解决办法：（1）遇到401时，需要在请求的headers中携带'Authorization': 'Basic YWRtaW46Z2Vvc2VydmVy'来进行解决；（2）遇到403时，说明在web.xml中，跨域信息没有完全打开，此时需要打开跨域请求，即:</li>
</ol>
<pre><code class="language-xml">   &lt;filter&gt;
        &lt;filter-name&gt;cross-origin&lt;/filter-name&gt;
        &lt;filter-class&gt;org.eclipse.jetty.servlets.CrossOriginFilter&lt;/filter-class&gt;
		
       &lt;init-param&gt;
           &lt;param-name&gt;chainPreflight&lt;/param-name&gt;
           &lt;param-value&gt;false&lt;/param-value&gt;
       &lt;/init-param&gt;
       &lt;init-param&gt;
           &lt;param-name&gt;allowedOrigins&lt;/param-name&gt;
           &lt;param-value&gt;*&lt;/param-value&gt;
       &lt;/init-param&gt;
       &lt;init-param&gt;
           &lt;param-name&gt;allowedMethods&lt;/param-name&gt;
           &lt;param-value&gt;GET,POST,PUT,DELETE,HEAD,OPTIONS&lt;/param-value&gt;
       &lt;/init-param&gt;
       &lt;init-param&gt;
           &lt;param-name&gt;allowedHeaders&lt;/param-name&gt;
           &lt;param-value&gt;*&lt;/param-value&gt;
       &lt;/init-param&gt;
    &lt;/filter&gt;

    &lt;filter-mapping&gt;
      &lt;filter-name&gt;Set Character Encoding&lt;/filter-name&gt;
      &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
    &lt;/filter-mapping&gt;
   
    &lt;filter-mapping&gt;
        &lt;filter-name&gt;cross-origin&lt;/filter-name&gt;
        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
    &lt;/filter-mapping&gt;
   
</code></pre>
<h2 id="0919">0919</h2>
<ol>
<li>天地图的能力请求方式：</li>
</ol>
<pre><code>http://t0.tianditu.gov.cn/vec_c/wmts?tk=f1d0e61021ded0ed120188019ec1c5a3?request=GetCapabilities&amp;service=wmts
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[0908-0914周总结]]></title>
        <id>https://hanjingyuan.github.io/post/0908-0914周总结</id>
        <link href="https://hanjingyuan.github.io/post/0908-0914周总结">
        </link>
        <updated>2019-09-07T16:00:00.000Z</updated>
        <content type="html"><![CDATA[<h1 id="0908-0914周">0908-0914周</h1>
<h2 id="0912">0912</h2>
<ol>
<li>对于瓦片规则的获取以及其他geoserver相关图层信息的获取可以使用geoserver自带的rest服务进行查找，例如获取gridset的信息，可以使用：http://localhost:8080/geoserver/gwc/rest/gridsets来实现；</li>
</ol>
<pre><code>1.获取瓦片图层：http://localhost:8080/geoserver/gwc/rest/layers
2.获取girdset：
http://localhost:8080/geoserver/gwc/rest/gridsets
</code></pre>
]]></content>
    </entry>
</feed>